<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#667eea">
    <link rel="icon" type="image/png" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect fill='%23667eea' width='100' height='100' rx='20'/><rect fill='%23FF8C42' x='27' y='45' width='46' height='8' rx='2'/><rect fill='%23FF8C42' x='30' y='53' width='40' height='25' rx='2'/><path fill='%23555' d='M45 20 Q50 25 50 30 L50 45 L45 45 L45 30 Q45 27 42 25 L38 25 Q35 25 35 28 L35 35 L30 35 L30 28 Q30 22 35 20 Z'/><circle fill='%2344C8F5' cx='62' cy='15' r='8'/><circle fill='%23AAA' cx='75' cy='15' r='4'/><circle fill='%23AAA' cx='85' cy='15' r='4'/></svg>">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect fill='%23667eea' width='100' height='100' rx='20'/><rect fill='%23FF8C42' x='27' y='45' width='46' height='8' rx='2'/><rect fill='%23FF8C42' x='30' y='53' width='40' height='25' rx='2'/><path fill='%23555' d='M45 20 Q50 25 50 30 L50 45 L45 45 L45 30 Q45 27 42 25 L38 25 Q35 25 35 28 L35 35 L30 35 L30 28 Q30 22 35 20 Z'/><circle fill='%2344C8F5' cx='62' cy='15' r='8'/><circle fill='%23AAA' cx='75' cy='15' r='4'/><circle fill='%23AAA' cx='85' cy='15' r='4'/></svg>">
    <title>Magazzino Filamenti 3D</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
            padding-bottom: 80px;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            margin-bottom: 20px;
        }

        h1 {
            color: #333;
            font-size: 1.8em;
            margin-bottom: 15px;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 15px;
            border-radius: 10px;
            color: white;
            text-align: center;
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
        }

        .stat-label {
            font-size: 12px;
            opacity: 0.9;
            margin-top: 5px;
        }

        .controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .search-box {
            flex: 1;
            min-width: 200px;
            padding: 12px 15px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }

        .filter-btn {
            padding: 12px 20px;
            border: none;
            border-radius: 10px;
            background: white;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
            transition: all 0.2s;
        }

        .filter-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .sort-select {
            padding: 12px 15px;
            border: none;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
            background: white;
        }

        .add-form {
            background: white;
            padding: 0;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            margin-bottom: 20px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out, padding 0.3s;
        }

        .add-form.open {
            max-height: 1000px;
            padding: 20px;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        label {
            margin-bottom: 5px;
            font-weight: 600;
            color: #333;
            font-size: 14px;
        }

        input, select, textarea {
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
            font-family: inherit;
        }

        textarea {
            resize: vertical;
            min-height: 60px;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 14px 30px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            touch-action: manipulation;
        }

        button:active {
            transform: scale(0.98);
        }

        .fab {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            font-size: 28px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        
        .fab:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(0,0,0,0.4);
        }

        .inventory {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 15px;
        }

        .filament-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            transition: transform 0.2s;
            position: relative;
            cursor: pointer;
        }

        .filament-card:active {
            transform: scale(0.98);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
        }

        .type-badge {
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
            color: white;
            text-transform: uppercase;
        }

        .type-pla { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
        .type-petg { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
        .type-abs { background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); }
        .type-tpu { background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); }

        .color-indicator {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        .card-info {
            margin-bottom: 12px;
        }

        .info-label {
            font-size: 11px;
            color: #666;
            margin-bottom: 3px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .info-value {
            font-size: 15px;
            font-weight: 600;
            color: #333;
        }

        .weight-bar {
            width: 100%;
            height: 25px;
            background: #f0f0f0;
            border-radius: 12px;
            overflow: hidden;
            margin-top: 10px;
            position: relative;
        }

        .weight-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            font-weight: 700;
        }

        .low-stock {
            background: linear-gradient(90deg, #ff6b6b 0%, #ee5a6f 100%);
        }

        .card-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }

        .action-btn {
            padding: 10px;
            font-size: 13px;
        }

        .edit-btn {
            background: #4facfe;
        }

        .delete-btn {
            background: #ff4757;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            grid-column: 1 / -1;
        }

        .export-btn {
            background: #2ecc71;
            margin-top: 10px;
            width: 100%;
        }

        .temp-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 10px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .temp-item {
            text-align: center;
        }

        .temp-value {
            font-size: 18px;
            font-weight: bold;
            color: #667eea;
        }

        .alert-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #ff4757;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: bold;
        }

        .privacy-link {
            position: fixed;
            bottom: 90px;
            right: 20px;
            background: white;
            color: #667eea;
            padding: 12px 20px;
            border-radius: 25px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.2);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            z-index: 999;
            transition: all 0.2s;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .privacy-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
        }

        .privacy-content {
            line-height: 1.8;
        }

        .privacy-content h3 {
            color: #667eea;
            margin-top: 20px;
            margin-bottom: 10px;
        }

        .privacy-content p {
            margin-bottom: 15px;
            color: #555;
        }

        .privacy-content ul {
            margin-left: 20px;
            margin-bottom: 15px;
            color: #555;
        }

        .privacy-content li {
            margin-bottom: 8px;
        }

        @media (max-width: 768px) {
            body {
                padding: 8px;
                padding-bottom: 80px;
            }

            h1 {
                font-size: 1.5em;
            }

            .inventory {
                grid-template-columns: 1fr;
            }

            .form-row {
                grid-template-columns: 1fr;
            }
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal.open {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 25px;
            border-radius: 15px;
            max-width: 500px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .close-btn {
            background: #e0e0e0;
            color: #333;
            padding: 8px 15px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" style="width:32px; height:32px; vertical-align:middle; margin-right:8px;">
                    <rect fill="#667eea" width="100" height="100" rx="20"/>
                    <rect fill="#FF8C42" x="27" y="45" width="46" height="8" rx="2"/>
                    <rect fill="#FF8C42" x="30" y="53" width="40" height="25" rx="2"/>
                    <path fill="#555" d="M45 20 Q50 25 50 30 L50 45 L45 45 L45 30 Q45 27 42 25 L38 25 Q35 25 35 28 L35 35 L30 35 L30 28 Q30 22 35 20 Z"/>
                    <circle fill="#44C8F5" cx="62" cy="15" r="8"/>
                    <circle fill="#AAA" cx="75" cy="15" r="4"/>
                    <circle fill="#AAA" cx="85" cy="15" r="4"/>
                </svg>
                Magazzino Filamenti 3D
            </h1>
            <div class="stats">
                <div class="stat-card">
                    <div class="stat-value" id="totalCount">0</div>
                    <div class="stat-label">Totale</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalWeight">0g</div>
                    <div class="stat-label">Peso Totale</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="lowStock">0</div>
                    <div class="stat-label">Scorte Basse</div>
                </div>
            </div>
        </div>

        <div class="controls">
            <input type="text" id="searchBox" class="search-box" placeholder="üîç Cerca filamento...">
            <select id="sortSelect" class="sort-select">
                <option value="recent">Pi√π recenti</option>
                <option value="name">Nome A-Z</option>
                <option value="weight">Peso (alto-basso)</option>
                <option value="type">Tipo</option>
            </select>
        </div>

        <div class="controls">
            <button class="filter-btn active" data-filter="all">Tutti</button>
            <button class="filter-btn" data-filter="PLA">PLA</button>
            <button class="filter-btn" data-filter="PETG">PETG</button>
            <button class="filter-btn" data-filter="ABS">ABS</button>
            <button class="filter-btn" data-filter="TPU">TPU</button>
            <button class="export-btn" id="exportBtn">üì• Esporta Dati</button>
        </div>

        <div id="addForm" class="add-form">
            <h2 style="margin-bottom: 20px; color: #333;">Aggiungi Filamento</h2>
            <form id="filamentForm">
                <div class="form-row">
                    <div class="form-group">
                        <label>Marca *</label>
                        <input type="text" id="brand" required placeholder="es. Prusa, eSun">
                    </div>
                    <div class="form-group">
                        <label>Tipo *</label>
                        <select id="type" required>
                            <option value="PLA">PLA</option>
                            <option value="PETG">PETG</option>
                            <option value="ABS">ABS</option>
                            <option value="TPU">TPU</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Colore *</label>
                        <input type="text" id="colorName" required placeholder="es. Rosso">
                    </div>
                    <div class="form-group">
                        <label>Tonalit√†</label>
                        <input type="color" id="colorPicker" value="#ff0000">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Peso (g) *</label>
                        <input type="number" id="weight" required placeholder="1000" min="0">
                    </div>
                    <div class="form-group">
                        <label>Diametro</label>
                        <select id="diameter">
                            <option value="1.75">1.75mm</option>
                            <option value="2.85">2.85mm</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Temp. Estrusore (¬∞C)</label>
                        <input type="number" id="tempNozzle" placeholder="200">
                    </div>
                    <div class="form-group">
                        <label>Temp. Piatto (¬∞C)</label>
                        <input type="number" id="tempBed" placeholder="60">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Posizione</label>
                        <input type="text" id="location" placeholder="es. Scaffale A">
                    </div>
                    <div class="form-group">
                        <label>Data Acquisto</label>
                        <input type="date" id="purchaseDate">
                    </div>
                </div>
                <div class="form-group">
                    <label>Note</label>
                    <textarea id="notes" placeholder="Note aggiuntive..."></textarea>
                </div>
                <input type="hidden" id="editId">
                <button type="submit" id="submitBtn">üíæ Salva Filamento</button>
            </form>
        </div>

        <div id="inventory" class="inventory"></div>
    </div>

    <button class="fab" id="fabButton">‚ûï</button>
    
    <div class="privacy-link" id="privacyButton">
        üîí Privacy
    </div>

    <div id="detailModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Dettagli Filamento</h2>
                <button class="close-btn" id="closeDetailBtn">‚úï</button>
            </div>
            <div id="modalBody"></div>
        </div>
    </div>

    <div id="privacyModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Privacy Policy</h2>
                <button class="close-btn" id="closePrivacyBtn">‚úï</button>
            </div>
            <div class="privacy-content">
                <p><strong>Ultimo aggiornamento:</strong> Novembre 2025</p>
                
                <h3>üì± Informazioni sulla Raccolta Dati</h3>
                <p>Questa applicazione web "Magazzino Filamenti 3D" √® progettata con la massima attenzione alla tua privacy.</p>
                
                <h3>üîí Dati Salvati Localmente</h3>
                <p>Tutti i dati che inserisci nell'applicazione sono salvati <strong>esclusivamente sul tuo dispositivo</strong> utilizzando il localStorage del browser. Questo significa:</p>
                <ul>
                    <li>I tuoi dati NON vengono mai inviati a server esterni</li>
                    <li>I tuoi dati NON vengono condivisi con terze parti</li>
                    <li>I tuoi dati rimangono completamente privati e sotto il tuo controllo</li>
                    <li>Solo tu hai accesso ai tuoi dati dal dispositivo che utilizzi</li>
                </ul>

                <h3>üíæ Cosa Viene Salvato</h3>
                <p>L'applicazione salva localmente sul tuo browser:</p>
                <ul>
                    <li>Informazioni sui filamenti (marca, tipo, colore, peso, ecc.)</li>
                    <li>Preferenze di visualizzazione (filtri, ordinamento)</li>
                </ul>

                <h3>üóëÔ∏è Cancellazione dei Dati</h3>
                <p>Puoi eliminare tutti i tuoi dati in qualsiasi momento:</p>
                <ul>
                    <li>Cancellando la cache del browser</li>
                    <li>Eliminando i dati del sito dalle impostazioni del browser</li>
                    <li>Eliminando singoli filamenti dall'applicazione</li>
                </ul>

                <h3>üåê Nessun Tracciamento</h3>
                <p>Questa applicazione:</p>
                <ul>
                    <li>NON utilizza cookie di tracciamento</li>
                    <li>NON utilizza strumenti di analytics</li>
                    <li>NON raccoglie informazioni personali</li>
                    <li>NON richiede registrazione o login</li>
                </ul>

                <h3>üì§ Esportazione Dati</h3>
                <p>Puoi esportare i tuoi dati in formato JSON in qualsiasi momento utilizzando il pulsante "Esporta Dati". Il file viene generato localmente e salvato sul tuo dispositivo.</p>

                <h3>üîê Sicurezza</h3>
                <p>La sicurezza dei tuoi dati dipende dalla sicurezza del tuo dispositivo e browser. Ti consigliamo di:</p>
                <ul>
                    <li>Utilizzare un browser aggiornato</li>
                    <li>Mantenere il tuo dispositivo protetto</li>
                    <li>Fare backup regolari esportando i dati</li>
                </ul>

                <p><em>Questa applicazione rispetta completamente la tua privacy perch√© tutti i dati rimangono sul tuo dispositivo.</em></p>
            </div>
        </div>
    </div>

    <script>
        let filaments = [];
        let currentFilter = 'all';
        let currentSort = 'recent';

        function loadFilaments() {
            const saved = localStorage.getItem('filaments3d');
            if (saved) {
                try {
                    filaments = JSON.parse(saved);
                    renderFilaments();
                    updateStats();
                } catch (e) {
                    console.error('Errore nel caricamento dei dati:', e);
                    filaments = [];
                }
            }
        }

        function saveFilaments() {
            localStorage.setItem('filaments3d', JSON.stringify(filaments));
            updateStats();
        }

        function toggleForm() {
            const form = document.getElementById('addForm');
            form.classList.toggle('open');
            if (form.classList.contains('open')) {
                document.getElementById('brand').focus();
            }
        }

        function addOrUpdateFilament(e) {
            e.preventDefault();
            
            const editId = document.getElementById('editId').value;
            const filament = {
                id: editId ? parseInt(editId) : Date.now(),
                brand: document.getElementById('brand').value,
                type: document.getElementById('type').value,
                colorName: document.getElementById('colorName').value,
                colorHex: document.getElementById('colorPicker').value,
                weight: parseInt(document.getElementById('weight').value),
                diameter: parseFloat(document.getElementById('diameter').value),
                tempNozzle: document.getElementById('tempNozzle').value || '-',
                tempBed: document.getElementById('tempBed').value || '-',
                location: document.getElementById('location').value || 'Non specificata',
                purchaseDate: document.getElementById('purchaseDate').value || null,
                notes: document.getElementById('notes').value || '',
                addedDate: editId ? (filaments.find(f => f.id === parseInt(editId))?.addedDate || new Date().toISOString()) : new Date().toISOString()
            };

            if (editId) {
                const index = filaments.findIndex(f => f.id === parseInt(editId));
                if (index !== -1) {
                    filaments[index] = filament;
                }
            } else {
                filaments.push(filament);
            }

            saveFilaments();
            renderFilaments();
            
            document.getElementById('filamentForm').reset();
            document.getElementById('editId').value = '';
            document.getElementById('colorPicker').value = '#ff0000';
            
            const form = document.getElementById('addForm');
            if (form.classList.contains('open')) {
                form.classList.remove('open');
            }
        }

        function editFilament(id) {
            const filament = filaments.find(f => f.id === id);
            if (!filament) return;

            document.getElementById('brand').value = filament.brand;
            document.getElementById('type').value = filament.type;
            document.getElementById('colorName').value = filament.colorName;
            document.getElementById('colorPicker').value = filament.colorHex;
            document.getElementById('weight').value = filament.weight;
            document.getElementById('diameter').value = filament.diameter;
            document.getElementById('tempNozzle').value = filament.tempNozzle !== '-' ? filament.tempNozzle : '';
            document.getElementById('tempBed').value = filament.tempBed !== '-' ? filament.tempBed : '';
            document.getElementById('location').value = filament.location !== 'Non specificata' ? filament.location : '';
            document.getElementById('purchaseDate').value = filament.purchaseDate || '';
            document.getElementById('notes').value = filament.notes;
            document.getElementById('editId').value = filament.id;

            document.getElementById('addForm').classList.add('open');
            document.getElementById('brand').focus();
        }

        function deleteFilament(id) {
            if (confirm('Sei sicuro di voler eliminare questo filamento?')) {
                filaments = filaments.filter(f => f.id !== id);
                saveFilaments();
                renderFilaments();
            }
        }

        function showDetails(id) {
            const filament = filaments.find(f => f.id === id);
            if (!filament) return;

            const modal = document.getElementById('detailModal');
            const body = document.getElementById('modalBody');
            
            body.innerHTML = `
                <div style="margin-bottom: 20px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                        <span class="type-badge type-${filament.type.toLowerCase()}">${filament.type}</span>
                        <div class="color-indicator" style="background-color: ${filament.colorHex}"></div>
                    </div>
                    
                    <h3 style="margin-bottom: 15px;">${filament.brand} - ${filament.colorName}</h3>
                    
                    <div class="temp-info">
                        <div class="temp-item">
                            <div class="info-label">Estrusore</div>
                            <div class="temp-value">${filament.tempNozzle}¬∞C</div>
                        </div>
                        <div class="temp-item">
                            <div class="info-label">Piatto</div>
                            <div class="temp-value">${filament.tempBed}¬∞C</div>
                        </div>
                    </div>

                    <div style="margin-top: 20px;">
                        <p><strong>Peso:</strong> ${filament.weight}g</p>
                        <p><strong>Diametro:</strong> ${filament.diameter}mm</p>
                        <p><strong>Posizione:</strong> ${filament.location}</p>
                        ${filament.purchaseDate ? `<p><strong>Acquistato:</strong> ${new Date(filament.purchaseDate).toLocaleDateString('it-IT')}</p>` : ''}
                        ${filament.notes ? `<p><strong>Note:</strong><br>${filament.notes}</p>` : ''}
                    </div>
                </div>
                <button id="closeDetailBtn2" style="width: 100%;">Chiudi</button>
            `;
            
            modal.classList.add('open');
            
            document.getElementById('closeDetailBtn2').addEventListener('click', closeModal);
        }

        function closeModal() {
            document.getElementById('detailModal').classList.remove('open');
        }

        function closePrivacyModal() {
            document.getElementById('privacyModal').classList.remove('open');
        }

        function openPrivacyModal() {
            document.getElementById('privacy